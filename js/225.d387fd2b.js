"use strict";(self["webpackChunkvue_homework"]=self["webpackChunkvue_homework"]||[]).push([[225],{3421:function(t,s,a){var e=a(4301),i=a(6265),o=a.n(i),l=a(6294);const c=(0,l.Z)();s["Z"]=(0,e.Q_)("cartStore",{state:()=>({cart:{},total:null,cartqty:null}),actions:{addToCart(t,s=1){const a="https://vue3-course-api.hexschool.io/api/youyu-api/cart";c.cartLodaingItem=t,c.isLoading=!1;const e={product_id:t,qty:s};o().post(a,{data:e}).then((t=>{c.pushMessage({title:"加入購物車"}),c.cartLodaingItem="",console.log(t),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/youyu-api/cart";c.isLoading=!0,o().get(t).then((t=>{this.cart=t.data.data,c.isLoading=!1,this.total=this.cart.total,this.cartqty=this.cart.carts.length,console.log(this.cartqty)}))},updateCart(t){const s=`https://vue3-course-api.hexschool.io/api/youyu-api/cart/${t.id}`;c.isLoading=!0,c.cartLodaingItem=t.id;const a={product_id:t.product_id,qty:t.qty};o().put(s,{data:a}).then((t=>{console.log(t),this.getCart(),c.pushMessage({title:"更新購物車資訊",content:t.data.message}),c.cartLodaingItem="",c.isLoading=!1}))},delcart(t){c.cartLodaingItem=t;const s=`https://vue3-course-api.hexschool.io/api/youyu-api/cart/${t}`;c.isLoading=!0,o()["delete"](s).then((t=>{console.log(t),c.pushMessage({title:"移除購物車品項",content:t.data.message}),c.cartLodaingItem="",this.getCart(),c.isLoading=!1}))}}})},6294:function(t,s,a){var e=a(4301);s["Z"]=(0,e.Q_)("statusStores",{state:()=>({isLoading:!1,cartLodaingItem:"",messages:[]}),actions:{pushMessage(t){const{title:s,content:a,style:e="success"}=t;this.messages.push({style:e,title:s,content:a})}}})},8225:function(t,s,a){a.r(s),a.d(s,{default:function(){return A}});var e=a(3396),i=a(7139),o=a(9242);const l=(0,e._)("div",{class:"text-center fs-3 pt-5 mt-5 ms-4",style:{"font-family":"Marcellus SC, serif"}}," 確認購物車商品數量是否正確 ",-1),c=(0,e._)("div",{class:"pt-5 container"},[(0,e._)("div",{class:"position-relative m-4",style:{"margin-top":"56px"}},[(0,e._)("div",{class:"progress",style:{height:"1px"}},[(0,e._)("div",{class:"progress-bar",role:"progressbar",style:{width:"100%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),(0,e._)("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"4rem",height:"4rem"}},[(0,e._)("i",{class:"bi bi-bag",style:{"font-size":"25px"}})]),(0,e._)("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-danger rounded-pill",style:{width:"4rem",height:"4rem"}},[(0,e._)("i",{class:"bi bi-cart-check",style:{"font-size":"25px"}})]),(0,e._)("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-secondary rounded-pill",style:{width:"4rem",height:"4rem"}},[(0,e._)("i",{class:"bi bi-credit-card-2-back",style:{"font-size":"25px"}})])])],-1),n=(0,e.uE)('<div class="container mx-auto pt-3"><div class="row"><div class="col-4 text-start fs-5">商品</div><div class="col-4 text-center fs-5">購物車</div><div class="col-4 text-end fs-5">結帳</div></div></div>',1),r={class:"container"},d=(0,e.uE)('<div class="col-12 col-lg-8"><div class="cart-table d-flex container p-3 mt-5 text-white"><div class="col-3">商品名稱</div><div class="col-2">單價</div><div class="col-3 ms-5">數量</div><div class="col-2">金額</div><div class="col-2">移除</div></div></div>',1),u={class:"row mb-5"},p={class:"col-3 ps-3 pt-3"},g=["src"],v={class:""},m={class:"col-2 ms-3 d-flex align-items-center"},h={class:"col-3 d-flex align-items-center"},b={class:"input-group input-group-sm",style:{width:"140px"}},_=["onUpdate:modelValue","onChange"],y={class:"input-group-text"},w={class:"col-2 d-flex align-items-center ms-4"},x={class:"col-2 d-flex align-items-center"},f=["onClick"],C=(0,e._)("i",{class:"bi bi-trash3"},null,-1),L=[C],k={class:"col-12 col-lg-4"},z={class:"row"},Z={class:"col-10 mx-auto shadow p-1 mb-3 bg-body rounded"},q={class:"row m-4"},I=(0,e._)("p",{class:"col-8"},"小計",-1),M={class:"col-4"},U=(0,e._)("p",{class:"col-8"},"運費",-1),D=(0,e._)("div",{class:"col-4"},"免費",-1),S=(0,e._)("hr",null,null,-1),W=(0,e._)("p",{class:"col-8"},"總計",-1),E={class:"col-4"},F=(0,e.Uk)("結帳");function H(t,s,a,C,H,N){const Q=(0,e.up)("Nav"),T=(0,e.up)("router-link"),V=(0,e.up)("Footer");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(Q),l,c,n,(0,e._)("div",r,[d,(0,e._)("div",u,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.cart.carts,(s=>((0,e.wg)(),(0,e.iD)("div",{class:"col-12 col-lg-8 d-flex shadow p-1 mb-3 bg-body rounded",style:{height:"200px"},key:s.id},[(0,e._)("div",p,[(0,e._)("img",{class:"pb-1 pic",src:s.product.imageUrl,alt:""},null,8,g),(0,e._)("p",v,(0,i.zw)(s.product.title),1)]),(0,e._)("div",m,[(0,e._)("p",null,(0,i.zw)(s.product.price)+"元",1)]),(0,e._)("div",h,[(0,e._)("div",b,[(0,e.wy)((0,e._)("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":t=>s.qty=t,onChange:a=>t.updateCart(s)},null,40,_),[[o.nr,s.qty,void 0,{number:!0}]]),(0,e._)("div",y,"/ "+(0,i.zw)(s.product.unit)+"元",1)])]),(0,e._)("div",w,(0,i.zw)(s.total)+"元 ",1),(0,e._)("div",x,[(0,e._)("button",{type:"button",class:"btn btn-danger",style:{"margin-top":"10px"},onClick:a=>t.delcart(s.id)},L,8,f)])])))),128)),(0,e._)("div",k,[(0,e._)("div",z,[(0,e._)("div",Z,[(0,e._)("div",q,[I,(0,e._)("div",M,(0,i.zw)(t.total)+"元",1),U,D,S,W,(0,e._)("div",E,(0,i.zw)(t.total)+"元",1),(0,e.Wm)(T,{to:"/user/order",class:"btn btn-warning"},{default:(0,e.w5)((()=>[F])),_:1})])])])])])]),(0,e.Wm)(V)],64)}var N=a(6696),Q=a(1547),T=a(4301),V=a(3421),Y=a(6294),$={components:{Nav:N.Z,Footer:Q.Z},computed:{...(0,T.rn)(V.Z,["cart","total"]),...(0,T.rn)(Y.Z,["isLoading"])},methods:{...(0,T.nv)(V.Z,["addToCart","getCart","delcart","updateCart"])},created(){this.getCart()}},K=a(89);const j=(0,K.Z)($,[["render",H]]);var A=j}}]);
//# sourceMappingURL=225.d387fd2b.js.map