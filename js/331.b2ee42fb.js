"use strict";(self["webpackChunkvue_homework"]=self["webpackChunkvue_homework"]||[]).push([[331],{3421:function(t,e,s){var a=s(4301),l=s(6265),o=s.n(l),i=s(6294);const r=(0,i.Z)();e["Z"]=(0,a.Q_)("cartStore",{state:()=>({cart:{},total:null,cartqty:null}),actions:{addToCart(t,e=1){const s="https://vue3-course-api.hexschool.io/api/youyu-api/cart";r.cartLodaingItem=t,r.isLoading=!1;const a={product_id:t,qty:e};o().post(s,{data:a}).then((t=>{r.pushMessage({title:"加入購物車"}),r.cartLodaingItem="",console.log(t),this.getCart()}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/youyu-api/cart";r.isLoading=!0,o().get(t).then((t=>{this.cart=t.data.data,r.isLoading=!1,this.total=this.cart.total,this.cartqty=this.cart.carts.length,console.log(this.cartqty)}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/youyu-api/cart/${t.id}`;r.isLoading=!0,r.cartLodaingItem=t.id;const s={product_id:t.product_id,qty:t.qty};o().put(e,{data:s}).then((t=>{console.log(t),this.getCart(),r.pushMessage({title:"更新購物車資訊",content:t.data.message}),r.cartLodaingItem="",r.isLoading=!1}))},delcart(t){r.cartLodaingItem=t;const e=`https://vue3-course-api.hexschool.io/api/youyu-api/cart/${t}`;r.isLoading=!0,o()["delete"](e).then((t=>{console.log(t),r.pushMessage({title:"移除購物車品項",content:t.data.message}),r.cartLodaingItem="",this.getCart(),r.isLoading=!1}))}}})},6294:function(t,e,s){var a=s(4301);e["Z"]=(0,a.Q_)("statusStores",{state:()=>({isLoading:!1,cartLodaingItem:"",messages:[]}),actions:{pushMessage(t){const{title:e,content:s,style:a="success"}=t;this.messages.push({style:a,title:e,content:s})}}})},4331:function(t,e,s){s.r(e),s.d(e,{default:function(){return it}});var a=s(3396);function l(t,e,s,l,o,i){const r=(0,a.up)("Nav"),c=(0,a.up)("Shop"),n=(0,a.up)("CartList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r),(0,a.Wm)(c),(0,a.Wm)(n)],64)}var o=s(6696);const i=(0,a._)("div",{class:"text-center fs-3 pt-3 mt-5 ms-4",style:{"font-family":"Marcellus SC, serif"}}," 結帳囉！ ",-1),r=(0,a._)("div",{class:"pt-5 container"},[(0,a._)("div",{class:"position-relative m-4",style:{"margin-top":"56px"}},[(0,a._)("div",{class:"progress",style:{height:"1px"}},[(0,a._)("div",{class:"progress-bar",role:"progressbar",style:{width:"100%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})]),(0,a._)("button",{type:"button",class:"position-absolute top-0 start-0 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"4rem",height:"4rem"}},[(0,a._)("i",{class:"bi bi-bag",style:{"font-size":"25px"}})]),(0,a._)("button",{type:"button",class:"position-absolute top-0 start-50 translate-middle btn btn-sm btn-primary rounded-pill",style:{width:"4rem",height:"4rem"}},[(0,a._)("i",{class:"bi bi-cart-check",style:{"font-size":"25px"}})]),(0,a._)("button",{type:"button",class:"position-absolute top-0 start-100 translate-middle btn btn-sm btn-danger rounded-pill",style:{width:"4rem",height:"4rem"}},[(0,a._)("i",{class:"bi bi-credit-card-2-back",style:{"font-size":"25px"}})])])],-1),c=(0,a.uE)('<div class="container mx-auto pt-3"><div class="row"><div class="col-4 text-start fs-5">商品</div><div class="col-4 text-center fs-5">購物車</div><div class="col-4 text-end fs-5">結帳</div></div></div>',1);function n(t,e){return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,r,c],64)}var d=s(89);const u={},m=(0,d.Z)(u,[["render",n]]);var p=m,v=s(7139);const h=(0,a.uE)('<div class="cart-table d-flex container p-3 mt-5 text-white"><div class="col-3" style="flex-basis:30%;">商品名稱</div><div class="col-1" style="flex-basis:20%;">單價</div><div class="col-1" style="flex-basis:20%;">數量</div><div class="col-3" style="flex-basis:15%;">金額</div><div class="col-3" style="flex-basis:15%;">移除</div></div>',1),g={class:"col-3 d-flex align-items-center",style:{"flex-basis":"30%"}},f=["src"],b={class:"d-none d-md-block"},y={class:"col-1 d-flex align-items-center text",style:{"flex-basis":"20%"}},_={class:"col-1 d-flex align-items-center",style:{"flex-basis":"20%"}},x={class:"col-3 d-flex align-items-center",style:{"flex-basis":"15%"}},w={class:"col-3 d-flex align-items-center",style:{"flex-basis":"15%"}},C=["onClick"],L=(0,a._)("i",{class:"bi bi-trash3"},null,-1),k=[L],V={class:"row flex-column-reverse flex-md-row mt-5"},W={class:"col-md-6"},I={class:"col-md-6 mt-5 pt-5 cartinfo"},Z={class:"row"},q={class:"col-10 mx-auto shadow p-1 mb-3 bg-body rounded"},M={class:"row m-5"},z=(0,a._)("p",{class:"col-9"},"小計",-1),S={class:"col-3"},D=(0,a._)("p",{class:"col-9"},"運費",-1),U=(0,a._)("div",{class:"col-3"},"免費",-1),$=(0,a._)("hr",null,null,-1),F=(0,a._)("p",{class:"col-9"},"總計",-1),H={class:"col-3"};function O(t,e,s,l,o,i){const r=(0,a.up)("LoadingView"),c=(0,a.up)("OrderInfo"),n=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r,{active:t.isLoading},null,8,["active"]),h,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.cart.carts,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"container mt-5 cart-list d-flex mb-5 shadow p-1 mb-3 bg-body rounded",key:e.id},[(0,a._)("div",g,[(0,a._)("img",{class:"me-5 pic",src:e.product.imageUrl,alt:""},null,8,f),(0,a._)("span",b,(0,v.zw)(e.product.title),1)]),(0,a._)("div",y,(0,v.zw)(e.product.price),1),(0,a._)("div",_,(0,v.zw)(e.qty),1),(0,a._)("div",x,(0,v.zw)(e.total),1),(0,a._)("div",w,[(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:s=>t.delcart(e.id)},k,8,C)])])))),128)),(0,a._)("div",V,[(0,a._)("div",W,[(0,a.Wm)(c)]),(0,a._)("div",I,[(0,a._)("div",Z,[(0,a._)("div",q,[(0,a._)("div",M,[z,(0,a._)("div",S,(0,v.zw)(t.total),1),D,U,$,F,(0,a._)("div",H,(0,v.zw)(t.total),1)])])])])]),(0,a.Wm)(n)],64)}var Y=s(1547);const E={class:"mx-auto col-10"},N=(0,a._)("div",null,[(0,a._)("p",{class:"text-center fs-3",style:{"font-family":"Marcellus SC, serif"}},"運送資訊")],-1),P={class:"col-12"},Q={class:"col-12"},K={class:"col-12"},T={class:"col-12"},j=(0,a._)("div",{class:"text-end"},[(0,a._)("button",{type:"submit",class:"btn btn-warning"},"送出訂單")],-1);function A(t,e,s,l,o,i){const r=(0,a.up)("FieldView"),c=(0,a.up)("error-message"),n=(0,a.up)("FormView");return(0,a.wg)(),(0,a.iD)("div",E,[N,(0,a.Wm)(n,{class:"row gy-3 p-md-2 formcontrol mb-3",onSubmit:i.createOrder},{default:(0,a.w5)((({errors:t})=>[(0,a._)("div",P,[(0,a.Wm)(r,{type:"text",name:"姓氏",class:(0,v.C_)(["form-control",{"is-invalid":t["姓氏"]}]),id:"validationCustom03",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":e[0]||(e[0]=t=>o.form.user.name=t),placeholder:"姓名"},null,8,["class","modelValue"]),(0,a.Wm)(c,{name:"姓氏",class:"invalid-feedback"})]),(0,a._)("div",Q,[(0,a.Wm)(r,{type:"email",name:"email",class:(0,v.C_)(["form-control",{"is-invalid":t["email"]}]),id:"validationCustom02",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form.user.email=t),placeholder:"電子郵件"},null,8,["class","modelValue"]),(0,a.Wm)(c,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",K,[(0,a.Wm)(r,{type:"text",name:"電話",class:(0,v.C_)(["form-control",{"is-invalid":t["電話"]}]),id:"validationCustom04",rules:i.isPhone,modelValue:o.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=t=>o.form.user.tel=t),placeholder:"手機"},null,8,["class","rules","modelValue"]),(0,a.Wm)(c,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",T,[(0,a.Wm)(r,{type:"text",name:"地址",class:(0,v.C_)(["form-control",{"is-invalid":t["地址"]}]),id:"validationCustom04",rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=t=>o.form.user.address=t),placeholder:"地址"},null,8,["class","modelValue"]),(0,a.Wm)(c,{name:"地址",class:"invalid-feedback"})]),(0,a._)("span",null,[(0,a.Wm)(r,{name:"訊息",class:(0,v.C_)(["col-12 ps-2 pb-5",{"is-invalid":t["訊息"]}]),rules:"required",placeholder:"Message 訊息",modelValue:o.form.user.Message,"onUpdate:modelValue":e[4]||(e[4]=t=>o.form.user.Message=t)},null,8,["class","modelValue"]),(0,a.Wm)(c,{name:"訊息",class:"invalid-feedback"})]),j])),_:1},8,["onSubmit"])])}var B={data(){return{orderId:"",form:{user:{name:"",Lastname:"",tel:"",address:"",email:"",Message:""}}}},methods:{isPhone(t){const e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},createOrder(){const t="https://vue3-course-api.hexschool.io/api/youyu-api/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{console.log(t.data.orderId);const e=t.data.orderId;this.$router.push(`/user/checkout/${e}`)}))}}};const G=(0,d.Z)(B,[["render",A]]);var J=G,R=s(4301),X=s(6294),tt=s(3421),et={data(){return{}},components:{OrderInfo:J,Footer:Y.Z},computed:{...(0,R.rn)(X.Z,["isLoading"]),...(0,R.rn)(tt.Z,["cart","total"])},methods:{...(0,R.nv)(tt.Z,["getCart","delcart"])},created(){this.getCart()}};const st=(0,d.Z)(et,[["render",O]]);var at=st,lt={data(){return{}},components:{Nav:o.Z,Shop:p,CartList:at}};const ot=(0,d.Z)(lt,[["render",l]]);var it=ot}}]);
//# sourceMappingURL=331.b2ee42fb.js.map